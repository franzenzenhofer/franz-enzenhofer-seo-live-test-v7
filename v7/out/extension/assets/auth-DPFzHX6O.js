const a="googleApiAccessToken",c=async()=>{const{[a]:e}=await chrome.storage.local.get(a);return e||null},n=async e=>{e?await chrome.storage.local.set({[a]:e}):await chrome.storage.local.remove(a)},s=async()=>{const e=await c();return e?new Promise(t=>{chrome.identity.getAuthToken({interactive:!1},o=>{o?n(o).then(()=>t(o)).catch(()=>t(o)):t(e)})}):null},i=async()=>new Promise(e=>{chrome.identity.getAuthToken({interactive:!0},t=>{t?n(t).then(()=>e(t)).catch(()=>e(t)):e(null)})}),r=async()=>{const e=await c();e&&(await fetch("https://accounts.google.com/o/oauth2/revoke?token="+e),await new Promise(t=>chrome.identity.removeCachedAuthToken({token:e},()=>t(null))),await n(null))};export{a as T,s as a,c as g,i,r};
