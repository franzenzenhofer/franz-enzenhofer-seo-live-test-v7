const s=e=>`logs:${e}`,g=async(e,t)=>{const c=`[${new Date().toISOString()}] ${t}`,{[s(e)]:r}=await chrome.storage.session.get(s(e)),l=Array.isArray(r)?[...r,c]:[c];await chrome.storage.session.set({[s(e)]:l})},h=async e=>{const{[s(e)]:t}=await chrome.storage.session.get(s(e));return Array.isArray(t)?t:[]},m=async e=>{await chrome.storage.session.remove(s(e))},a="googleApiAccessToken",i=async()=>{const{[a]:e}=await chrome.storage.local.get(a);return e||null},n=async e=>{e?await chrome.storage.local.set({[a]:e}):await chrome.storage.local.remove(a)},u=async()=>{const e=await i();return e?new Promise(t=>{chrome.identity.getAuthToken({interactive:!1},o=>{o?n(o).then(()=>t(o)).catch(()=>t(o)):t(e)})}):null},w=async()=>new Promise(e=>{chrome.identity.getAuthToken({interactive:!0},t=>{t?n(t).then(()=>e(t)).catch(()=>e(t)):e(null)})}),y=async()=>{const e=await i();e&&(await fetch("https://accounts.google.com/o/oauth2/revoke?token="+e),await new Promise(t=>chrome.identity.removeCachedAuthToken({token:e},()=>t(null))),await n(null))};export{a as T,i as a,y as b,m as c,h as g,w as i,g as l,u as r};
