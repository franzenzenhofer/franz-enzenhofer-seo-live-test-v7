import{j as t,r as x}from"./client-BVdrxQBY.js";const h=e=>{if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e,null,2)}catch{return String(e)}},p=({details:e})=>{if(!e)return null;const r=Object.entries(e);return r.length?t.jsx("div",{className:"mt-2 border-t pt-2 space-y-2 text-xs",children:r.map(([s,a])=>t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold uppercase tracking-wide text-[10px] text-slate-500",children:s}),t.jsx("pre",{className:"mt-1 whitespace-pre-wrap break-words bg-white/60 p-2 rounded border text-[11px]",children:h(a)})]},s))}):null},y=e=>e!=null&&e.what&&e.what.length>0?e.what:e!=null&&e.name?e.name.replace(/([a-z])([A-Z])/g,"$1 $2"):"",m=({result:e,index:r,isPinned:s,onTogglePin:a,canToggleDetails:o,open:n,onToggleDetails:c,dotClass:l})=>{const i=x.useMemo(()=>{const d=y(e);return d?`${e.label}: ${d}`:e.label},[e]);return t.jsxs("header",{className:"flex items-center gap-2 text-xs",children:[t.jsx("span",{className:`${l} w-2 h-2 rounded-full`}),t.jsx("span",{className:"font-semibold text-slate-900 flex-1 truncate",children:i}),typeof r=="number"&&t.jsxs("span",{className:"text-[10px] text-slate-500",children:["#",r+1]}),a&&t.jsx("button",{type:"button",className:`text-sm ${s?"text-yellow-500":"text-slate-400"} hover:text-yellow-500`,onClick:a,title:s?"Unpin rule":"Pin rule",children:s?"★":"☆"}),o&&t.jsx("button",{type:"button",className:"text-xs px-2 py-0.5 border rounded bg-white/60 text-slate-700",onClick:c,children:n?"Hide":"Details"})]})},f={error:{bg:"bg-red-50",border:"border-red-300",text:"text-red-900",dot:"bg-red-500",badge:"bg-red-100 text-red-800",full:"bg-red-50 border-red-300 text-red-900"},warn:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-900",dot:"bg-amber-500",badge:"bg-amber-100 text-amber-800",full:"bg-amber-50 border-amber-300 text-amber-900"},ok:{bg:"bg-green-50",border:"border-green-300",text:"text-green-900",dot:"bg-green-500",badge:"bg-green-100 text-green-800",full:"bg-green-50 border-green-300 text-green-900"},info:{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-900",dot:"bg-blue-500",badge:"bg-blue-100 text-blue-800",full:"bg-blue-50 border-blue-300 text-blue-900"}},j=e=>f[e]||{bg:"bg-gray-50",border:"border-gray-300",text:"text-gray-900",dot:"bg-gray-500",badge:"bg-gray-100 text-gray-800",full:"bg-gray-50 border-gray-300 text-gray-900"},C={error:0,warn:1,info:2,ok:3},S=({result:e,index:r,isPinned:s,onTogglePin:a,collapsible:o,defaultExpanded:n})=>{const c=j(e.type),[l,i]=x.useState(!o||!!n),d=l&&!!e.details,g=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(e,null,2))}catch{}};return t.jsxs("article",{className:`${c.full} border rounded p-3 space-y-2`,children:[t.jsx(m,{result:e,index:r,isPinned:s,onTogglePin:a,canToggleDetails:!!(e.details&&o),open:l,onToggleDetails:()=>i(u=>!u),dotClass:c.dot}),t.jsx("p",{className:"text-sm text-slate-900 break-words",children:e.message}),d&&t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{className:"text-[11px] underline",onClick:g,children:"Copy Result"})}),t.jsx(p,{details:e.details})]})]})},b=e=>`results:${e}`,$=async e=>{const{[b(e)]:r}=await chrome.storage.local.get(b(e));return r||[]},k=(e,r)=>{const s=a=>{const o=a[b(e)];o&&r(o.newValue||[])};return chrome.storage.onChanged.addListener(s),()=>chrome.storage.onChanged.removeListener(s)},D=async e=>{await chrome.storage.local.remove(b(e))},w=e=>{if(!e)return"";const r=new Date(e),s=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),o=r.getFullYear(),n=String(r.getHours()).padStart(2,"0"),c=String(r.getMinutes()).padStart(2,"0");return`${s}.${a}.${o}, ${n}:${c}`},N=({runId:e,ranAt:r,onOpenReport:s})=>!e&&!r?null:t.jsxs("div",{className:"text-xs text-gray-600",children:[e&&t.jsxs("button",{onClick:s,className:"hover:text-blue-600 underline decoration-gray-300 hover:decoration-blue-600",children:["#",e]}),e&&r&&t.jsx("span",{children:" - "}),r&&t.jsx("span",{children:w(r)})]}),v=({url:e,runId:r,ranAt:s,onOpenUrl:a,onOpenReport:o})=>{const[n,c]=x.useState(e||""),l=x.useRef(null);x.useEffect(()=>{c(e||""),l.current&&e&&setTimeout(()=>{l.current&&(l.current.scrollLeft=l.current.scrollWidth)},0)},[e]);const i=async()=>{if(n)try{await navigator.clipboard.writeText(n)}catch{}},d=async()=>{n&&a&&a(n)};return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("input",{ref:l,type:"text",value:n,onChange:g=>c(g.target.value),placeholder:"No URL yet",className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-40",onClick:()=>void i(),disabled:!n,children:"Copy URL"}),t.jsx("button",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-40",onClick:()=>void d(),disabled:!n,children:"Open URL"})]})]}),t.jsx(N,{runId:r,ranAt:s,onOpenReport:o})]})},L=({url:e,runId:r,ranAt:s,version:a,primaryAction:o,secondaryActions:n,onOpenUrl:c,onOpenReport:l})=>t.jsx("div",{className:"border-b bg-white",children:t.jsxs("div",{className:"p-3 space-y-2",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx("h1",{className:"text-base font-bold text-gray-900",children:"Franz Enzenhofer SEO Live Test"}),a&&t.jsxs("div",{className:"text-xs text-gray-500",children:["v",a]})]}),t.jsx(v,{url:e,runId:r,ranAt:s,onOpenUrl:c,onOpenReport:l}),o&&t.jsx("div",{children:o}),n&&t.jsx("div",{className:"flex items-center gap-3 text-sm",children:n})]})}),T=async e=>{var r;if(e)try{const s=await chrome.tabs.query({active:!0,currentWindow:!0});(r=s[0])!=null&&r.id&&await chrome.tabs.update(s[0].id,{url:e})}catch{}};export{L,S as R,C as a,D as c,j as g,T as o,$ as r,k as w};
